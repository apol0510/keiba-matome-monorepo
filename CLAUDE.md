# keiba-matome-monorepo: 2ché¢¨ç«¶é¦¬ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¾ã¨ã‚ã‚µã‚¤ãƒˆç¾¤

## ğŸ—ï¸ monorepoæ§‹æˆ

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¯ã€2ch/5ché¢¨ã®ç«¶é¦¬ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¾ã¨ã‚ã‚µã‚¤ãƒˆ2ã¤ã‚’ç®¡ç†ã™ã‚‹monorepoã§ã™ã€‚

```
keiba-matome-monorepo/
â”œâ”€â”€ package.json                    â† npm workspacesè¨­å®š
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ shared/                     â† å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒª
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ scripts/
â”‚   â”‚       â””â”€â”€ generate-2ch-comments.cjs  â† 2ché¢¨ã‚³ãƒ¡ãƒ³ãƒˆç”Ÿæˆï¼ˆåœ°æ–¹ç«¶é¦¬ç‰¹åŒ–ï¼‰
â”‚   â”œâ”€â”€ keiba-matome/              â† ä¸­å¤®ç«¶é¦¬ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¾ã¨ã‚
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â”œâ”€â”€ CLAUDE.md
â”‚   â”‚   â””â”€â”€ ... (Astroãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ)
â”‚   â””â”€â”€ chihou-keiba-matome/       â† åœ°æ–¹ç«¶é¦¬ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¾ã¨ã‚
â”‚       â”œâ”€â”€ package.json
â”‚       â”œâ”€â”€ CLAUDE.md
â”‚       â””â”€â”€ ... (Astroãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ)
â””â”€â”€ CLAUDE.md                       â† ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### packages/keiba-matome (ä¸­å¤®ç«¶é¦¬)

**ãƒ‰ãƒ¡ã‚¤ãƒ³**: https://keiba-matome.jp
**ãƒãƒ¼ãƒˆ**: 4323
**Airtable Base**: appdHJSC4F9pTIoDj
**X (Twitter)**: @keiba_matome_jp

**ãƒ‹ãƒ¥ãƒ¼ã‚¹å…ƒ**:
- netkeiba (3ä»¶/å›)
- Yahoo!ãƒ‹ãƒ¥ãƒ¼ã‚¹ (3ä»¶/å›)

**ç‰¹å¾´**:
- ä¸­å¤®ç«¶é¦¬ï¼ˆJRAï¼‰ç‰¹åŒ–
- é‡è³ãƒ¬ãƒ¼ã‚¹ãƒ»é¨æ‰‹ãƒ»é¦¬ä¸»ãƒ‹ãƒ¥ãƒ¼ã‚¹
- Xè‡ªå‹•æŠ•ç¨¿æ©Ÿèƒ½ã‚ã‚Š
- å®Œå…¨è‡ªå‹•åŒ–ï¼ˆ1æ—¥3å›å®Ÿè¡Œï¼‰

### packages/chihou-keiba-matome (åœ°æ–¹ç«¶é¦¬)

**ãƒ‰ãƒ¡ã‚¤ãƒ³**: https://chihou.keiba-matome.jp
**ãƒãƒ¼ãƒˆ**: 4324
**Airtable Base**: appt25zmKxQDiSCwh

**ãƒ‹ãƒ¥ãƒ¼ã‚¹å…ƒ**:
- netkeibaåœ°æ–¹ç«¶é¦¬ (5ä»¶/å›)
- ã‚¹ãƒãƒ¼ãƒ„å ±çŸ¥ (4ä»¶/å›)
- ã‚¹ãƒãƒ‹ãƒ (4ä»¶/å›)
- Yahoo!ãƒ‹ãƒ¥ãƒ¼ã‚¹ (4ä»¶/å›)

**ç‰¹å¾´**:
- åœ°æ–¹ç«¶é¦¬ï¼ˆå—é–¢æ±4ç«¶é¦¬ï¼‹å…¨å›½ï¼‰ç‰¹åŒ–
- å¤§äº•ãƒ»èˆ¹æ©‹ãƒ»å·å´ãƒ»æµ¦å’Œã®ãƒŠã‚¤ã‚¿ãƒ¼ç«¶é¦¬
- ãƒˆã‚¥ã‚¤ãƒ³ã‚¯ãƒ«ã‚·ãƒªãƒ¼ã‚ºãƒ»åœ°æ–¹G1
- å®Œå…¨è‡ªå‹•åŒ–ï¼ˆ1æ—¥3å›å®Ÿè¡Œï¼‰

### packages/shared (å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒª)

**å†…å®¹**:
- `scripts/generate-2ch-comments.cjs`: 2ché¢¨ã‚³ãƒ¡ãƒ³ãƒˆè‡ªå‹•ç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
  - Claude Sonnet 4.5ä½¿ç”¨
  - åœ°æ–¹ç«¶é¦¬ç‰¹åŒ–ã®ç”¨èªãƒ»ãƒã‚¿å¯¾å¿œ
  - 15-35ä»¶/è¨˜äº‹ã®ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆ

**ä¾å­˜é–¢ä¿‚**:
- @anthropic-ai/sdk: Claude API
- airtable: Airtableæ¥ç¶š
- puppeteer: ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ï¼ˆå„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå´ã§ä½¿ç”¨ï¼‰

---

## ä¸»è¦ã‚³ãƒãƒ³ãƒ‰

### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•

```bash
# ä¸­å¤®ç«¶é¦¬ã‚µã‚¤ãƒˆ (localhost:4323)
npm run dev:keiba-matome

# åœ°æ–¹ç«¶é¦¬ã‚µã‚¤ãƒˆ (localhost:4324)
npm run dev:chihou

# ä¸¡æ–¹åŒæ™‚èµ·å‹•
npm run dev:keiba-matome & npm run dev:chihou
```

### ãƒ“ãƒ«ãƒ‰

```bash
# å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¸€æ‹¬ãƒ“ãƒ«ãƒ‰
npm run build:all

# å€‹åˆ¥ãƒ“ãƒ«ãƒ‰
npm run build --workspace=packages/keiba-matome
npm run build --workspace=packages/chihou-keiba-matome
```

### ãã®ä»–ã®ã‚³ãƒãƒ³ãƒ‰

```bash
# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆå…¨ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ï¼‰
npm install

# ç‰¹å®šãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§ä¾å­˜é–¢ä¿‚è¿½åŠ 
npm install <package> --workspace=packages/keiba-matome
npm install <package> --workspace=packages/chihou-keiba-matome
npm install <package> --workspace=packages/shared
```

---

## å…±æœ‰ã‚³ãƒ¼ãƒ‰ã®ä½¿ã„æ–¹

### ç¾åœ¨ã®å…±æœ‰ã‚³ãƒ¼ãƒ‰

`packages/shared/scripts/generate-2ch-comments.cjs` ãŒå”¯ä¸€ã®å…±æœ‰ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚

**ä½¿ç”¨ä¾‹**:
```bash
# keiba-matomeã‹ã‚‰ä½¿ç”¨
cd packages/keiba-matome
ANTHROPIC_API_KEY="xxx" AIRTABLE_API_KEY="xxx" AIRTABLE_BASE_ID="xxx" node ../shared/scripts/generate-2ch-comments.cjs

# chihou-keiba-matomeã‹ã‚‰ä½¿ç”¨
cd packages/chihou-keiba-matome
ANTHROPIC_API_KEY="xxx" AIRTABLE_API_KEY="xxx" AIRTABLE_BASE_ID="xxx" node ../shared/scripts/generate-2ch-comments.cjs
```

### å…±æœ‰ã‚³ãƒ¼ãƒ‰ã®è¿½åŠ æ–¹æ³•

1. `packages/shared/scripts/` ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¿½åŠ 
2. å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® `package.json` ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦å‚ç…§

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### å…±é€š
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Astro 5.x
- **ãƒ‡ã‚¶ã‚¤ãƒ³**: ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³CSSï¼ˆ2ché¢¨ãƒ‡ã‚¶ã‚¤ãƒ³ï¼‰
- **ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°**: Puppeteer
- **ã‚³ãƒ¡ãƒ³ãƒˆç”Ÿæˆ**: Anthropic Claude Sonnet 4.5
- **ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°**: Netlify
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Airtableï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ç‹¬ç«‹ã—ãŸBaseï¼‰

### é–‹ç™ºç’°å¢ƒ
- **monorepoç®¡ç†**: npm workspaces
- **ãƒãƒ¼ãƒˆ**: 4323ï¼ˆkeiba-matomeï¼‰ã€4324ï¼ˆchihou-keiba-matomeï¼‰

---

## GitHub Actionsã«ã‚ˆã‚‹è‡ªå‹•åŒ–

### keiba-matome (ä¸­å¤®ç«¶é¦¬)

`.github/workflows/daily-news.yml`
- **é »åº¦**: 1æ—¥3å›ï¼ˆ6AM, 12PM, 6PM JSTï¼‰
- **å‡¦ç†å†…å®¹**:
  1. netkeibaã‹ã‚‰è¨˜äº‹ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ï¼ˆ3ä»¶ï¼‰
  2. å„è¨˜äº‹ã«2ché¢¨ã‚³ãƒ¡ãƒ³ãƒˆç”Ÿæˆï¼ˆ15-35ä»¶/è¨˜äº‹ï¼‰
  3. **X (Twitter)ã«è‡ªå‹•æŠ•ç¨¿**ï¼ˆæœ€å¤§3ä»¶/å›ï¼‰
  4. Netlifyè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤

### chihou-keiba-matome (åœ°æ–¹ç«¶é¦¬)

`.github/workflows/daily-news.yml`
- **é »åº¦**: 1æ—¥3å›ï¼ˆ6AM, 12PM, 6PM JSTï¼‰
- **å‡¦ç†å†…å®¹**:
  1. netkeibaåœ°æ–¹ç«¶é¦¬ã‹ã‚‰è¨˜äº‹ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ï¼ˆ5ä»¶ï¼‰
  2. ã‚¹ãƒãƒ¼ãƒ„å ±çŸ¥ã€ã‚¹ãƒãƒ‹ãƒã€Yahoo!ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‹ã‚‰è¨˜äº‹å–å¾—ï¼ˆå„4ä»¶ï¼‰
  3. å„è¨˜äº‹ã«2ché¢¨ã‚³ãƒ¡ãƒ³ãƒˆç”Ÿæˆï¼ˆ15-35ä»¶/è¨˜äº‹ï¼‰
  4. Netlifyè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤

---

## ç’°å¢ƒå¤‰æ•°

### keiba-matome (ä¸­å¤®ç«¶é¦¬)

```bash
# Airtable
AIRTABLE_API_KEY=pat***
AIRTABLE_BASE_ID=appdHJSC4F9pTIoDj

# Claude API
ANTHROPIC_API_KEY=sk-ant-api03-***

# X (Twitter) API
X_API_KEY=***
X_API_SECRET=***
X_ACCESS_TOKEN=***
X_ACCESS_SECRET=***

# ã‚µã‚¤ãƒˆæƒ…å ±
SITE_URL=https://keiba-matome.jp
```

### chihou-keiba-matome (åœ°æ–¹ç«¶é¦¬)

```bash
# Airtable
AIRTABLE_API_KEY=patCIn4iIx274YQZB***
AIRTABLE_BASE_ID=appt25zmKxQDiSCwh

# Claude API
ANTHROPIC_API_KEY=sk-ant-api03-***

# ã‚µã‚¤ãƒˆæƒ…å ±
SITE_URL=https://chihou.keiba-matome.jp
```

---

## ãƒ‡ãƒ¼ã‚¿åˆ†é›¢ãƒãƒªã‚·ãƒ¼

**é‡è¦**: 2ã¤ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å®Œå…¨ã«ç‹¬ç«‹ã—ã¦ã„ã¾ã™ã€‚

| é …ç›® | keiba-matome | chihou-keiba-matome |
|------|--------------|---------------------|
| Airtable Base | appdHJSC4F9pTIoDj | appt25zmKxQDiSCwh |
| ãƒ‡ãƒ¼ã‚¿å…±æœ‰ | **ãªã—** | **ãªã—** |
| ãƒ‡ãƒ—ãƒ­ã‚¤ | ç‹¬ç«‹ | ç‹¬ç«‹ |
| GitHub Actions | ç‹¬ç«‹ | ç‹¬ç«‹ |
| XæŠ•ç¨¿ | ã‚ã‚Š (@keiba_matome_jp) | ãªã— |

**å…±æœ‰ã™ã‚‹ã‚‚ã®**:
- ã‚³ãƒ¡ãƒ³ãƒˆç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ (`packages/shared/scripts/generate-2ch-comments.cjs`)
- 2ché¢¨ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆå„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ç‹¬ç«‹å®Ÿè£…ï¼‰

---

## review-platform-monorepoã¨ã®é–¢ä¿‚

**âŒ å®Œå…¨ã«ç‹¬ç«‹**
- review-platform-monorepoã¯å£ã‚³ãƒŸã‚µã‚¤ãƒˆç¾¤
- keiba-matome-monorepoã¯2ché¢¨ã¾ã¨ã‚ã‚µã‚¤ãƒˆç¾¤
- ç›®çš„ãŒå…¨ãç•°ãªã‚‹ãŸã‚ã€çµ±åˆã—ãªã„

---

## Claudeã¸ã®æŒ‡ç¤ºï¼ˆå¿…èª­ï¼‰

### åŸºæœ¬æ–¹é‡
- [ ] ã“ã®monorepoã¯2ché¢¨ã¾ã¨ã‚ã‚µã‚¤ãƒˆå°‚ç”¨
- [ ] review-platform-monorepoã¨ã¯å®Œå…¨ã«ç‹¬ç«‹
- [ ] ã‚³ãƒ¡ãƒ³ãƒˆç”Ÿæˆã®æ”¹å–„ã¯ `packages/shared` ã§è¡Œã„ã€ä¸¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é©ç”¨

### ä½œæ¥­æ™‚ã®æ³¨æ„
- [ ] å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® `CLAUDE.md` ã‚’å¿…ãšèª­ã‚€ã“ã¨
- [ ] ä¸­å¤®ç«¶é¦¬ã¨åœ°æ–¹ç«¶é¦¬ã§ç”¨èªãƒ»ãƒ‹ãƒ¥ãƒ¼ã‚¹å…ƒãŒç•°ãªã‚‹ã“ã¨ã‚’ç†è§£ã™ã‚‹ã“ã¨
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆAirtable Baseï¼‰ã¯å®Œå…¨ã«ç‹¬ç«‹ã—ã¦ã„ã‚‹ã“ã¨

### ã‚³ãƒ¡ãƒ³ãƒˆç”Ÿæˆæ”¹å–„æ™‚
- [ ] `packages/shared/scripts/generate-2ch-comments.cjs` ã‚’ä¿®æ­£
- [ ] åœ°æ–¹ç«¶é¦¬ç‰¹åŒ–ã®ç”¨èªï¼ˆå—é–¢æ±4ç«¶é¦¬ã€ãƒˆã‚¥ã‚¤ãƒ³ã‚¯ãƒ«ã€TCKãªã©ï¼‰ã«å¯¾å¿œæ¸ˆã¿
- [ ] ä¸¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å‹•ä½œç¢ºèªã™ã‚‹ã“ã¨

---

## ä½œæ¥­å±¥æ­´

### 2025-12-21

1. âœ… **monorepoåˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†**
   - keiba-matome-monorepoãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
   - npm workspacesè¨­å®š
   - packages/sharedä½œæˆï¼ˆgenerate-2ch-comments.cjsç§»å‹•ï¼‰
   - æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ2ã¤ã‚’ packages/ ã«ç§»å‹•
   - GitåˆæœŸåŒ–ï¼†ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªä½œæˆ
   - GitHub: https://github.com/apol0510/keiba-matome-monorepo

2. âœ… **å‹•ä½œç¢ºèªå®Œäº†**
   - keiba-matomeã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•æˆåŠŸï¼ˆlocalhost:4324ï¼‰
   - npm workspacesæ­£å¸¸å‹•ä½œ
   - CLAUDE.mdä½œæˆ

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®CLAUDE.mdæ›´æ–°**
   - monorepoåŒ–å®Œäº†ã‚’åæ˜ 
   - ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ã‚’æ›´æ–°
   - å…±æœ‰ã‚³ãƒ¼ãƒ‰ã®å‚ç…§æ–¹æ³•ã‚’è¨˜è¼‰

2. **å…±æœ‰ã‚³ãƒ¼ãƒ‰ã®æ‹¡å……æ¤œè¨**
   - ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ã®å…±é€šåŒ–ï¼ˆæ¤œè¨ä¸­ï¼‰
   - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã®å…±æœ‰ï¼ˆæ¤œè¨ä¸­ï¼‰

3. **CI/CDæœ€é©åŒ–**
   - GitHub Actionsã§monorepoå¯¾å¿œ
   - å¤‰æ›´ã•ã‚ŒãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã¿ãƒ“ãƒ«ãƒ‰ï¼ˆæ¤œè¨ä¸­ï¼‰

---

## ãƒªãƒã‚¸ãƒˆãƒªæƒ…å ±

- **GitHub**: https://github.com/apol0510/keiba-matome-monorepo
- **ä½œæˆæ—¥**: 2025-12-21
- **ãƒ©ã‚¤ã‚»ãƒ³ã‚¹**: Private
- **ãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼**: @apol0510

---

## å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- packages/keiba-matome/CLAUDE.md: ä¸­å¤®ç«¶é¦¬ã‚µã‚¤ãƒˆã®è©³ç´°
- packages/chihou-keiba-matome/CLAUDE.md: åœ°æ–¹ç«¶é¦¬ã‚µã‚¤ãƒˆã®è©³ç´°
