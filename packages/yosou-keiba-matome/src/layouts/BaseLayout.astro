---
interface Props {
  title: string;
  description?: string;
  ogImage?: string;
}

const {
  title,
  description = 'ç«¶é¦¬ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¾ã¨ã‚ - netkeiba/Yahoo!ãƒ‹ãƒ¥ãƒ¼ã‚¹ã«2ch/5ché¢¨ã‚³ãƒ¡ãƒ³ãƒˆ',
  ogImage = '/og/default.png',
} = Astro.props;

const siteTitle = 'ç«¶é¦¬ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¾ã¨ã‚';
const fullTitle = title === 'ãƒˆãƒƒãƒ—' ? siteTitle : `${title} | ${siteTitle}`;
const siteUrl = import.meta.env.SITE_URL || 'https://keiba-matome.jp';
const canonicalUrl = new URL(Astro.url.pathname, siteUrl);
const ogImageUrl = ogImage.startsWith('http') ? ogImage : `${siteUrl}${ogImage}`;
---

<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <meta name="generator" content={Astro.generator} />

    <!-- ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ– -->
    <meta name="theme-color" content="#ea8b00" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <!-- ãƒªã‚½ãƒ¼ã‚¹ãƒ’ãƒ³ãƒˆï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šï¼‰ -->
    <link rel="dns-prefetch" href="https://www.googletagmanager.com" />
    <link rel="dns-prefetch" href="https://challenges.cloudflare.com" />
    <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin />

    <!-- Google Search Console èªè¨¼ -->
    <meta name="google-site-verification" content="eltW9iJZ4uV7v4LHvlZtC7BJDGJYkFBtJ6GOcWThQLc" />

    <!-- OGP -->
    <meta property="og:title" content={fullTitle} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:image" content={ogImageUrl} />
    <meta property="og:site_name" content={siteTitle} />
    <meta property="og:locale" content="ja_JP" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={fullTitle} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImageUrl} />

    <!-- Canonical -->
    <link rel="canonical" href={canonicalUrl} />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HMBYF1PJ5K"></script>
    <script is:inline>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-HMBYF1PJ5K');
    </script>

    <!-- Cloudflare Turnstile CAPTCHA -->
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

    <title>{fullTitle}</title>
    <slot name="head" />

    <!-- ãƒ•ã‚©ãƒ³ãƒˆæœ€é©åŒ– -->
    <style>
      /* ã‚·ã‚¹ãƒ†ãƒ ãƒ•ã‚©ãƒ³ãƒˆå„ªå…ˆï¼ˆé«˜é€ŸåŒ–ï¼‰ */
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Yu Gothic', 'Hiragino Sans', sans-serif;
      }
    </style>

    <!-- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œCSS -->
    <style>
      /* ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ã‚¹ãƒãƒ›å‘ã‘ */
      .header-container {
        max-width: 1000px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
      }

      .header-nav {
        display: flex;
        gap: 12px;
        font-size: 12px;
        margin-top: 4px;
      }

      .main-container {
        max-width: 1000px;
        margin: 8px auto;
        padding: 0 8px;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .main-content {
        width: 100%;
      }

      .sidebar {
        width: 100%;
        order: 2;
      }

      /* ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆä»¥ä¸Š: ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚’å³å´ã«é…ç½® */
      @media (min-width: 768px) {
        .main-container {
          flex-direction: row;
          margin: 16px auto;
        }

        .main-content {
          flex: 1;
        }

        .sidebar {
          width: 280px;
          flex-shrink: 0;
          order: 0;
        }

        .header-nav {
          font-size: 13px;
          gap: 16px;
          margin-top: 0;
        }
      }
    </style>
  </head>
  <body style="background-color: #ffffee; color: #000; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Yu Gothic', 'Hiragino Sans', sans-serif; margin: 0; padding: 0;">
    <!-- 2ché¢¨ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div style="background-color: #ea8b00; color: #fff; padding: 8px 16px; border-bottom: 2px solid #000;">
      <div class="header-container">
        <a href="/" style="color: #fff; text-decoration: none; font-size: 16px; font-weight: bold;">
          ç«¶é¦¬ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¾ã¨ã‚
        </a>
        <nav class="header-nav">
          <a href="/" style="color: #fff; text-decoration: none;">æ¿ä¸€è¦§</a>
          <a href="/stats" style="color: #fff; text-decoration: none;">ğŸ¯ çš„ä¸­ç‡</a>
          <a href="/about/" style="color: #fff; text-decoration: none;">READ.ME</a>
          <a href="/contact/" style="color: #fff; text-decoration: none;">ãŠå•ã„åˆã‚ã›</a>
        </nav>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-container">
      <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
      <div class="main-content">
        <slot />
      </div>

      <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼ˆé–¢é€£ã‚µã‚¤ãƒˆï¼‰ -->
      <div class="sidebar">
        <!-- é–¢é€£ã‚µã‚¤ãƒˆ -->
        <div style="background-color: #e6e6dc; border: 1px solid #999; padding: 12px; margin-bottom: 16px;">
          <h3 style="margin: 0 0 12px 0; font-size: 14px; font-weight: bold; border-bottom: 2px solid #ea8b00; padding-bottom: 4px;">
            ğŸ”— é–¢é€£ã‚µã‚¤ãƒˆ
          </h3>
          <div style="font-size: 12px; line-height: 1.8;">
            <div style="margin-bottom: 12px; padding: 8px; background-color: #fff; border: 1px solid #ddd;">
              <a href="https://chihou.keiba-matome.jp/" target="_blank" rel="noopener" style="color: #0000ff; text-decoration: none; font-weight: bold; display: block; margin-bottom: 4px;">
                ğŸ‡ åœ°æ–¹ç«¶é¦¬ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¾ã¨ã‚
              </a>
              <p style="margin: 0; color: #666; font-size: 11px;">å—é–¢æ±4ç«¶é¦¬ãƒ»å…¨å›½åœ°æ–¹ç«¶é¦¬</p>
            </div>
            <div style="margin-bottom: 12px; padding: 8px; background-color: #fff; border: 1px solid #ddd;">
              <a href="https://keiba-review.jp/" target="_blank" rel="noopener" style="color: #0000ff; text-decoration: none; font-weight: bold; display: block; margin-bottom: 4px;">
                â­ ç«¶é¦¬äºˆæƒ³ã‚µã‚¤ãƒˆå£ã‚³ãƒŸè©•ä¾¡
              </a>
              <p style="margin: 0; color: #666; font-size: 11px;">500ã‚µã‚¤ãƒˆä»¥ä¸Šã®è©•åˆ¤ãƒ»å£ã‚³ãƒŸ</p>
            </div>
            <div style="margin-bottom: 12px; padding: 8px; background-color: #fff; border: 1px solid #ddd;">
              <a href="https://keiba-b.netlify.app/" target="_blank" rel="noopener" style="color: #0000ff; text-decoration: none; font-weight: bold; display: block; margin-bottom: 4px;">
                ğŸ“° ç«¶é¦¬ãƒ‹ãƒ¥ãƒ¼ã‚¹é€Ÿå ±
              </a>
              <p style="margin: 0; color: #666; font-size: 11px;">æœ€æ–°æƒ…å ±ã‚’AIã§ã¾ã¨ã‚</p>
            </div>
          </div>
        </div>

        <!-- CTA: äºˆæƒ³ã‚µã‚¤ãƒˆè¨ºæ–­ -->
        <div style="background-color: #fff3cd; border: 2px solid #ea8b00; padding: 12px; margin-bottom: 16px; text-align: center;">
          <p style="margin: 0 0 8px 0; font-size: 13px; font-weight: bold; color: #ea8b00;">
            ğŸ‡ ç„¡æ–™è¨ºæ–­
          </p>
          <p style="margin: 0 0 10px 0; font-size: 11px; color: #666; line-height: 1.5;">
            ã‚ãªãŸã«åˆã£ãŸç«¶é¦¬äºˆæƒ³ã‚µã‚¤ãƒˆã‚’500ã‚µã‚¤ãƒˆã‹ã‚‰å³é¸
          </p>
          <a href="https://keiba-review.jp/"
             target="_blank"
             rel="noopener"
             style="display: inline-block; padding: 8px 16px; background-color: #ea8b00; color: #fff; text-decoration: none; border-radius: 4px; font-weight: bold; font-size: 12px;">
            è¨ºæ–­ã™ã‚‹ â†’
          </a>
        </div>

        <!-- æ³¨æ„æ›¸ã -->
        <div style="background-color: #fff; border: 1px solid #ddd; padding: 10px; font-size: 10px; color: #999; line-height: 1.6;">
          <p style="margin: 0 0 6px 0; font-weight: bold; color: #666;">âš ï¸ åºƒå‘Šã«ã¤ã„ã¦</p>
          <p style="margin: 0;">å½“ã‚µã‚¤ãƒˆã¯å£ã‚³ãƒŸã‚µã‚¤ãƒˆã‚„ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚µã‚¤ãƒˆã¸ã®ãƒªãƒ³ã‚¯ã‚’å«ã¿ã¾ã™ãŒã€ã™ã¹ã¦ç„¡æ–™ã§ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€‚</p>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div style="background-color: #e6e6dc; border-top: 1px solid #999; margin-top: 32px; padding: 16px; text-align: center; font-size: 11px; color: #666;">
      <p style="margin: 4px 0;">Â© {new Date().getFullYear()} ç«¶é¦¬ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¾ã¨ã‚</p>
      <p style="margin: 4px 0;">æ²ç¤ºæ¿åˆ©ç”¨è¦ç´„ã‚’å®ˆã£ã¦ã€æ¥½ã—ãã”åˆ©ç”¨ãã ã•ã„ã€‚</p>
    </div>
  </body>
</html>
